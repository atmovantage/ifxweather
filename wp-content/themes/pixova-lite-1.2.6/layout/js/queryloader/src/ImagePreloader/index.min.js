function ImagePreloader(a){"use strict";this.parent=a,this.sources=[],this.images=[],this.loaded=0,this.deepSearch=!0}function ImagePreloader(a){"use strict";this.parent=a,this.sources=[],this.images=[],this.loaded=0,this.deepSearch=!0}var Image=require("./Image.js");ImagePreloader.prototype.getImageSrcs=function(a){"use strict";if(this.sources=[],"undefined"!=typeof a&&(this.findImageInElement(a),this.deepSearch===!0))for(var b=a.querySelectorAll("*"),c=0;c<b.length;c++)"SCRIPT"!==b[c].tagName&&this.findImageInElement(b[c]);return this.sources},ImagePreloader.prototype.findAndPreload=function(a){"use strict";if("undefined"!=typeof a){this.sources=this.getImageSrcs(a);for(var b=0;b<this.sources.length;b++){var c=new Image(this.sources[b]);c.preload(this.imageLoaded.bind(this)),this.images.push(c)}}},ImagePreloader.prototype.imageLoaded=function(){"use strict";this.loaded++,this.updateProgress()},ImagePreloader.prototype.updateProgress=function(){"use strict";this.parent.updateProgress(this.loaded,this.sources.length)},ImagePreloader.prototype.findImageInElement=function(a){"use strict";var b=this.determineUrlAndType(a);if(!this.hasGradient(b.url)){b.url=this.stripUrl(b.url);for(var c=b.url.split(", "),d=0;d<c.length;d++)if(this.validUrl(c[d])&&this.urlIsNew(c[d])){var e="";(this.isIE()||this.isOpera())&&(e="?rand="+Math.random()),this.sources.push(c[d]+e)}}},ImagePreloader.prototype.determineUrlAndType=function(a){"use strict";var b="",c="normal",d=a.currentStyle||window.getComputedStyle(a,null);return""!==d.backgroundImage&&"none"!==d.backgroundImage||""!==a.style.backgroundImage&&"none"!==a.style.backgroundImage?(b=d.backgroundImage||a.style.backgroundImage,c="background"):"undefined"!=typeof a.getAttribute("src")&&"img"===a.nodeName.toLowerCase()&&(b=a.getAttribute("src")),{url:b,type:c}},ImagePreloader.prototype.hasGradient=function(a){"use strict";return"undefined"!=typeof a.indexOf?-1!==a.indexOf("gradient("):!1},ImagePreloader.prototype.stripUrl=function(a){"use strict";return a=a.replace(/url\(\"/g,""),a=a.replace(/url\(/g,""),a=a.replace(/\"\)/g,""),a=a.replace(/\)/g,"")},ImagePreloader.prototype.validUrl=function(a){"use strict";return a.length>0&&!a.match(/^(data:)/i)?!0:!1},ImagePreloader.prototype.urlIsNew=function(a){"use strict";return-1===this.sources.indexOf(a)},ImagePreloader.prototype.isIE=function(){"use strict";return navigator.userAgent.match(/msie/i)},ImagePreloader.prototype.isOpera=function(){"use strict";return navigator.userAgent.match(/Opera/i)},module.exports=ImagePreloader;var Image=require("./Image.js");ImagePreloader.prototype.getImageSrcs=function(a){"use strict";if(this.sources=[],"undefined"!=typeof a&&(this.findImageInElement(a),this.deepSearch===!0))for(var b=a.querySelectorAll("*"),c=0;c<b.length;c++)"SCRIPT"!==b[c].tagName&&this.findImageInElement(b[c]);return this.sources},ImagePreloader.prototype.findAndPreload=function(a){"use strict";if("undefined"!=typeof a){this.sources=this.getImageSrcs(a);for(var b=0;b<this.sources.length;b++){var c=new Image(this.sources[b]);c.preload(this.imageLoaded.bind(this)),this.images.push(c)}}},ImagePreloader.prototype.imageLoaded=function(){"use strict";this.loaded++,this.updateProgress()},ImagePreloader.prototype.updateProgress=function(){"use strict";this.parent.updateProgress(this.loaded,this.sources.length)},ImagePreloader.prototype.findImageInElement=function(a){"use strict";var b=this.determineUrlAndType(a);if(!this.hasGradient(b.url)){b.url=this.stripUrl(b.url);for(var c=b.url.split(", "),d=0;d<c.length;d++)if(this.validUrl(c[d])&&this.urlIsNew(c[d])){var e="";(this.isIE()||this.isOpera())&&(e="?rand="+Math.random()),this.sources.push(c[d]+e)}}},ImagePreloader.prototype.determineUrlAndType=function(a){"use strict";var b="",c="normal",d=a.currentStyle||window.getComputedStyle(a,null);return""!==d.backgroundImage&&"none"!==d.backgroundImage||""!==a.style.backgroundImage&&"none"!==a.style.backgroundImage?(b=d.backgroundImage||a.style.backgroundImage,c="background"):"undefined"!=typeof a.getAttribute("src")&&"img"===a.nodeName.toLowerCase()&&(b=a.getAttribute("src")),{url:b,type:c}},ImagePreloader.prototype.hasGradient=function(a){"use strict";return"undefined"!=typeof a.indexOf?-1!==a.indexOf("gradient("):!1},ImagePreloader.prototype.stripUrl=function(a){"use strict";return a=a.replace(/url\(\"/g,""),a=a.replace(/url\(/g,""),a=a.replace(/\"\)/g,""),a=a.replace(/\)/g,"")},ImagePreloader.prototype.validUrl=function(a){"use strict";return a.length>0&&!a.match(/^(data:)/i)?!0:!1},ImagePreloader.prototype.urlIsNew=function(a){"use strict";return-1===this.sources.indexOf(a)},ImagePreloader.prototype.isIE=function(){"use strict";return navigator.userAgent.match(/msie/i)},ImagePreloader.prototype.isOpera=function(){"use strict";return navigator.userAgent.match(/Opera/i)},module.exports=ImagePreloader;
//# sourceMappingURL=index.min.js.map